%description:

Tests communication tracking at the service level of the data link layer on an Ethernet network.

%file: test.ned

import inet.networklayer.configurator.ipv4.Ipv4NetworkConfigurator;
import inet.node.ethernet.Eth1G;
import inet.node.inet.StandardHost;
import inet.tracker.integrated.IntegratedTracker;

network TestNetwork
{
    submodules:
        tracker: IntegratedTracker;
        configurator: Ipv4NetworkConfigurator;
        source: StandardHost;
        destination: StandardHost;
    connections:
        source.ethg++ <--> Eth1G <--> destination.ethg++;
}

%inifile: omnetpp.ini

[General]
network = TestNetwork
sim-time-limit = 1s
ned-path = .;../../../../src

**.arp.typename = "GlobalArp"

# ping app
*.source.numApps = 1
*.source.app[0].typename = "PingApp"
*.source.app[0].destAddr = "destination"
*.source.app[0].startTime = 0s

*.tracker.physicalLinkTracker.fileName = "results/physical-layer.log"
*.tracker.physicalLinkTracker.trackLinks = true
*.tracker.physicalLinkTracker.activityLevel = "service"

%contains: results/physical-layer.log
TestNetwork.source	TestNetwork.destination	ping0	physical_layer service_level
TestNetwork.destination	TestNetwork.source	ping0-reply	physical_layer service_level
